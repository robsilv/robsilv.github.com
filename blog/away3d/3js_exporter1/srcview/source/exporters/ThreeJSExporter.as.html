<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>ThreeJSExporter.as</title>
<link rel="stylesheet" type="text/css" href="../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">exporters</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">containers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ObjectContainer3D</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">base</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Mesh</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">base</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Object3D</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">base</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Vertex</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ExporterEvent</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BitmapMaterial</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ColorMaterial</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Material</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WireColorMaterial</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WireframeMaterial</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Cone</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Cube</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Cylinder</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GeodesicSphere</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GridPlane</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">LineSegment</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Plane</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Sphere</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Torus</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Trident</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WireCone</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WireCube</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WireCylinder</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WirePlane</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WireSphere</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">away3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WireTorus</span>;
    
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">display</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BlendMode</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">EventDispatcher</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geom</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Matrix3D</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geom</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Vector3D</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Dictionary</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getDefinitionByName</span>;
    
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">ThreeJSExporter</span> <span class="ActionScriptReserved">extends</span> <span class="ActionScriptDefault_Text">EventDispatcher</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">jsString</span>        :<span class="ActionScriptDefault_Text">String</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">meshString</span>        :<span class="ActionScriptDefault_Text">String</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span>    :<span class="ActionScriptDefault_Text">Dictionary</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_registeredContainerTypes</span>    :<span class="ActionScriptDefault_Text">Dictionary</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_registeredMaterialTypes</span>    :<span class="ActionScriptDefault_Text">Dictionary</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_numObjects</span>:<span class="ActionScriptDefault_Text">int</span>;
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">ThreeJSExporter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> 
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptComment">// Primitives: map class type to serialiser function
</span>            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">Cone</span><span class="ActionScriptBracket/Brace">]</span>                    <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getConeDataObj</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">WireCone</span><span class="ActionScriptBracket/Brace">]</span>                <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getWireConeDataObj</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">Cube</span><span class="ActionScriptBracket/Brace">]</span>                    <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getCubeConstructorAsString</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">WireCube</span><span class="ActionScriptBracket/Brace">]</span>                <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getWireCubeConstructorAsString</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">Cylinder</span><span class="ActionScriptBracket/Brace">]</span>                <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getCylinderConstructorAsString</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">WireCylinder</span><span class="ActionScriptBracket/Brace">]</span>            <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getWireCylinderConstructorAsString</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">LineSegment</span><span class="ActionScriptBracket/Brace">]</span>            <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getLineSegmentConstructorAsString</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">GeodesicSphere</span><span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getGeodesicSphereConstructorAsString</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">GridPlane</span><span class="ActionScriptBracket/Brace">]</span>                <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getGridPlaneDataConstructorAsString</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">Plane</span><span class="ActionScriptBracket/Brace">]</span>                    <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getPlaneConstructorAsString</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">WirePlane</span><span class="ActionScriptBracket/Brace">]</span>                <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getWirePlaneConstructorAsString</span>;
<span class="ActionScriptComment">//            _registeredObject3dTypes[RegularPolygon]        = getRegularPolygonConstructorAsString;
</span>            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">Sphere</span><span class="ActionScriptBracket/Brace">]</span>                <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getSphereConstructorAsString</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">WireSphere</span><span class="ActionScriptBracket/Brace">]</span>            <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getWireSphereConstructorAsString</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">Torus</span><span class="ActionScriptBracket/Brace">]</span>                    <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getTorusConstructorAsString</span>;
            <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">WireTorus</span><span class="ActionScriptBracket/Brace">]</span>                <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getWireTorusConstructorAsString</span>;
            
            <span class="ActionScriptComment">// Object3DContainers: map class type to serialiser function
</span>            <span class="ActionScriptDefault_Text">_registeredContainerTypes</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">_registeredContainerTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">Trident</span><span class="ActionScriptBracket/Brace">]</span>                <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getTridentConstructorAsString</span>;
            
            <span class="ActionScriptComment">// Materials: map class type to serialiser function
</span>            <span class="ActionScriptDefault_Text">_registeredMaterialTypes</span>                        <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">_registeredMaterialTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">BitmapMaterial</span><span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getBitmapMaterialConstructorString</span>;
            <span class="ActionScriptDefault_Text">_registeredMaterialTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">ColorMaterial</span><span class="ActionScriptBracket/Brace">]</span>            <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getColorMaterialConstructorString</span>;
            <span class="ActionScriptDefault_Text">_registeredMaterialTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">WireColorMaterial</span><span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getWireColorMaterialConstructorString</span>;
            <span class="ActionScriptDefault_Text">_registeredMaterialTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">WireframeMaterial</span><span class="ActionScriptBracket/Brace">]</span>        <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getWireframeMaterialConstructorString</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">reset</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">jsString</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
            <span class="ActionScriptDefault_Text">meshString</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
            <span class="ActionScriptDefault_Text">_numObjects</span> <span class="ActionScriptOperator">=</span> 0;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">export</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">hasEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ExporterEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">COMPLETE</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"ThreeJSExporter Error:\nNo ExporterEvent.COMPLETE event set.\nUse the method addOnExportComplete(myfunction) before use export();\n"</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">return</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptDefault_Text">reset</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">parse</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">jsString</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">writeFirstBitOfHTMLFile</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptComment">// Write meshes
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">meshString</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0 <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">jsString</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">jsString</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">meshString</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptDefault_Text">jsString</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">writeLastBitOfHTMLFile</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">EE</span>:<span class="ActionScriptDefault_Text">ExporterEvent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ExporterEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ExporterEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">COMPLETE</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">EE</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">jsString</span>;
            <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">EE</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>        
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parse</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">containerid</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> -1 <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">ObjectContainer3D</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">ObjectContainer3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ObjectContainer3D</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptDefault_Text">Class</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getType</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">containerName</span>:<span class="ActionScriptDefault_Text">String</span>;
                
                <span class="ActionScriptComment">// for all nested objectContainers, not the scene's objectContainer
</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">containerid</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">containerName</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getContainerName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_numObjects</span><span class="ActionScriptBracket/Brace">)</span>;
                    
                    <span class="ActionScriptDefault_Text">meshString</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">getObject3dDefAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_numObjects</span><span class="ActionScriptOperator">,</span> 4<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">meshString</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"scene.addObject("</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">containerName</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">");"</span><span class="ActionScriptOperator">,</span> 4<span class="ActionScriptBracket/Brace">)</span>;
                    
                    <span class="ActionScriptDefault_Text">_numObjects</span> <span class="ActionScriptOperator">++</span>;
                <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                    
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptComment">// loop through the objectContainer's children
</span>                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">children</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">childObj</span>    :<span class="ActionScriptDefault_Text">Object3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">children</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptComment">// if the child of the objectContainer is another objectContainer,
</span>                    <span class="ActionScriptComment">// start parse() again, passing the child container.
</span>                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">childObj</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">ObjectContainer3D</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">parse</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">childObj</span><span class="ActionScriptOperator">,</span> 0<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptComment">// if this parent objectContainer isn't a recognised container type, write out it's children.
</span>                        <span class="ActionScriptComment">// (recognised objectContainers should handle their own children internally, e.g. Trident)
</span>                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isRecognisedContainerType</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">!=</span> 0<span class="ActionScriptBracket/Brace">)</span>    <span class="ActionScriptDefault_Text">meshString</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">writeMesh</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">childObj</span><span class="ActionScriptOperator">,</span> 0<span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>                
            <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptComment">// TO DO: Implement for single selected Mesh
</span><span class="ActionScriptComment">// if the Object3D isn't an ObjectContainer3D
</span><span class="ActionScriptComment">//            else {
</span><span class="ActionScriptComment">//                writeMesh( object3d, -1);
</span><span class="ActionScriptComment">//            }
</span>        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">writeMesh</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">containerid</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> -1<span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptDefault_Text">Class</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getType</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">typeName</span>    :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">)</span>    <span class="ActionScriptDefault_Text">typeName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getClassName</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">typeName</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toLowerCase</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">_numObjects</span>;

            <span class="ActionScriptDefault_Text">meshString</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">getObject3dDefAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_numObjects</span><span class="ActionScriptOperator">,</span> 4<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">isRecognisedObject3dType</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">isRecognisedContainerType</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">meshString</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"scene.addObject("</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">");"</span><span class="ActionScriptOperator">,</span> 4<span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">_numObjects</span> <span class="ActionScriptOperator">++</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// WRITING FUNCTIONS ===============================================
</span>        
        <span class="ActionScriptComment">// Returns the constructor function for each material as a String
</span>        <span class="ActionScriptComment">// and sets relevant properties
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span>:<span class="ActionScriptDefault_Text">Material</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">matType</span>    :<span class="ActionScriptDefault_Text">Class</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getType</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">matStr</span>    :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"null"</span>;
            
            <span class="ActionScriptvar">var</span>    <span class="ActionScriptDefault_Text">getDefFunc</span>    :<span class="ActionScriptDefault_Text">Function</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_registeredMaterialTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">matType</span><span class="ActionScriptBracket/Brace">]</span>;
            
            <span class="ActionScriptComment">// get specific properties and methods for a Primitive (if they exist)
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">getDefFunc</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">matStr</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getDefFunc</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">matStr</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// Returns the complete definition of the object3d as a String including constructor,
</span>        <span class="ActionScriptComment">// sets properties and calling methods
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getObject3dDefAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptDefault_Text">Class</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">uniqueId</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">numTabs</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>            :<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">props</span>:[]<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">params</span>:[] <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isContainer</span>    :<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptvar">var</span>    <span class="ActionScriptDefault_Text">getDefFunc</span>    :<span class="ActionScriptDefault_Text">Function</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">]</span>;
            
            <span class="ActionScriptComment">// if it's not in the registered Primitives, try Containers
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">getDefFunc</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">getDefFunc</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_registeredContainerTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">getDefFunc</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">isContainer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">typeName</span>    :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">typeName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getClassName</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">typeName</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toLowerCase</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">uniqueId</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>    :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
            
            <span class="ActionScriptComment">// get constructor String for Primitive
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">getDefFunc</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">str</span>    <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">getDefFunc</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> 4<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"// "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">typeName</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" currently not supported"</span><span class="ActionScriptOperator">,</span> 4<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            
            <span class="ActionScriptComment">// if the Object3d is a recognised Object3dContainer, don't parse further 
</span>            <span class="ActionScriptComment">// generic Mesh data, as it shouldn't be necessary in this instance
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isContainer</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getMeshDataObj</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Mesh</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">uniqueId</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">writeDataObjAsString</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">numTabs</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// Using the "props" array on the data object, write out all of the
</span>        <span class="ActionScriptComment">// properties for "objName" as a String.
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">writeDataObjAsString</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objName</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">numTabs</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>    :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">params</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> 
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">!=</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">","</span>;
                
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">props</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">kvp</span>    :<span class="ActionScriptDefault_Text">KVP</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">props</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">objName</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"."</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">kvp</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">key</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">kvp</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">value</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">";"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">numTabs</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span>  <span class="ActionScriptDefault_Text">writeFirstBitOfHTMLFile</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
            
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">"&lt;!DOCTYPE HTML&gt;"</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"  &lt;html lang=\"en\"&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"  &lt;head&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"    &lt;title&gt;three.js canvas - Away3D export&lt;/title&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"    &lt;meta charset=\"utf-8\"&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"    &lt;meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;\"/&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"    &lt;style type=\"text/css\"&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      body {"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        color: #000;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        font-family:Monospace;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        font-size:13px;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        text-align:center;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        font-weight: bold;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        background-color: #ffffff;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        margin: 0px;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        overflow: hidden;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      }"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      #info {"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        color:#000000;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        position: absolute;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        top: 0px; width: 100%;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        padding: 5px;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      }"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"    &lt;/style&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"  &lt;/head&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"  &lt;body&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"    &lt;div id=\"info\"&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      MOVE mouse &amp; press LEFT/A: rotate, MIDDLE/S: zoom, RIGHT/D: pan"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"    &lt;/div&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"    &lt;script type=\"text/javascript\" src=\"https://raw.github.com/mrdoob/three.js/master/build/Three.js\"&gt;&lt;/script&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"    &lt;script type=\"text/javascript\" src=\"https://raw.github.com/mrdoob/three.js/master/examples/js/RequestAnimationFrame.js\"&gt;&lt;/script&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"    &lt;script type=\"text/javascript\"&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      var container;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      var camera, scene, renderer;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      var windowHalfX = window.innerWidth / 2;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      var windowHalfY = window.innerHeight / 2;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      init();"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      animate();"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      function init()"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      {"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        container = document.createElement( 'div' );"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        document.body.appendChild( container );"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        camera = new THREE.TrackballCamera({"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          fov: 60,"</span><span class="ActionScriptBracket/Brace">)</span>; 
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          aspect: window.innerWidth / window.innerHeight,"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          near: 1,"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          far: 1e3,"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          rotateSpeed: 1.0,"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          zoomSpeed: 1.2,"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          panSpeed: 0.8,"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          noZoom: false,"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          noPan: false,"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          staticMoving: true,"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          dynamicDampingFactor: 0.3,"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"          keys: [ 65, 83, 68 ]"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        });"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        camera.position.y = 120;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        camera.position.z = 240;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        scene = new THREE.Scene();"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        renderer = new THREE.CanvasRenderer();"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        renderer.setSize( window.innerWidth, window.innerHeight );"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        container.appendChild( renderer.domElement );"</span><span class="ActionScriptBracket/Brace">)</span>;            
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">writeLastBitOfHTMLFile</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>    :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      }"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;        
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      function animate() {"</span><span class="ActionScriptBracket/Brace">)</span>;        
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        requestAnimationFrame( animate );"</span><span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        render();"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      }"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;        
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      function render() {"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"        renderer.render( scene, camera );"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"      }"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;        
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"    &lt;/script&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"  &lt;/body&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"&lt;/html&gt;"</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">numTabs</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0<span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"\n"</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">numTabs</span>; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">"\t"</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">value</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// Materials
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getBitmapMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span>:<span class="ActionScriptDefault_Text">Material</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bmpMat</span>:<span class="ActionScriptDefault_Text">BitmapMaterial</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BitmapMaterial</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">classPath</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getClassPath</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bmpMat</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bitmap</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">classPath</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">indexOf</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"."</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">array</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">classPath</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"."</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">classPath</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">array</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">!=</span> 0<span class="ActionScriptBracket/Brace">)</span>    <span class="ActionScriptDefault_Text">classPath</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">"/"</span>;
                    <span class="ActionScriptDefault_Text">classPath</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">array</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">classPath</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">".jpg"</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptString">"new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( '"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">classPath</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"' )} )"</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getColorMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span>:<span class="ActionScriptDefault_Text">Material</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">colorMat</span>:<span class="ActionScriptDefault_Text">ColorMaterial</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ColorMaterial</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptString">"new THREE.MeshBasicMaterial( { color: 0x"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">colorMat</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">color</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span>16<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" } )"</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getWireColorMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span>:<span class="ActionScriptDefault_Text">Material</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wireColMat</span>:<span class="ActionScriptDefault_Text">WireColorMaterial</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">WireColorMaterial</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptString">"new THREE.MeshBasicMaterial( { color: 0x"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">wireColMat</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">color</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span>16<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" } )"</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getWireframeMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span>:<span class="ActionScriptDefault_Text">Material</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wireFrameMat</span>:<span class="ActionScriptDefault_Text">WireframeMaterial</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">WireframeMaterial</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptString">"new THREE.MeshBasicMaterial( { color: 0x"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">wireFrameMat</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">wireColor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span>16<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", wireframe:true } )"</span>;
        <span class="ActionScriptBracket/Brace">}</span>    
        
        <span class="ActionScriptComment">// METHODS FOR CREATING DATA OBJECTS REPRESENTING OBJECT3Ds ===================
</span>        
        <span class="ActionScriptComment">// Primitives
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getConeDataObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cone</span>    :<span class="ActionScriptDefault_Text">Cone</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Cone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptComment">// height x 2 hack (due to Away3D Primitive error)
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh( new THREE.CylinderGeometry( "</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">cone</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsW</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", 1, "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cone</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">radius</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cone</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">*</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cone</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getWireConeDataObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cone</span>    :<span class="ActionScriptDefault_Text">WireCone</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">WireCone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptComment">// height x 2 hack (due to Away3D Primitive error)
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh( new THREE.CylinderGeometry( "</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">cone</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsW</span> <span class="ActionScriptOperator">+</span><span class="ActionScriptString">", 1, "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cone</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">radius</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cone</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">*</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">WireframeMaterial</span><span class="ActionScriptBracket/Brace">(</span>0x000000<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getCubeConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cube</span>    :<span class="ActionScriptDefault_Text">Cube</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Cube</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh( new THREE.CubeGeometry( "</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cube</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cube</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cube</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">depth</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">cube</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsW</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">cube</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsH</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">cube</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsD</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cube</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", new THREE.MeshFaceMaterial() );"</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getWireCubeConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cube</span>:<span class="ActionScriptDefault_Text">WireCube</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">WireCube</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh( new THREE.CubeGeometry( "</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cube</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cube</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cube</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">depth</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span>2<span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span>2<span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span>2
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">WireframeMaterial</span><span class="ActionScriptBracket/Brace">(</span>0x000000<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", new THREE.MeshFaceMaterial() );"</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;    
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getCylinderConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cylinder</span>    :<span class="ActionScriptDefault_Text">Cylinder</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Cylinder</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptComment">// height x 2 hack (due to Away3D Primitive error)
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh( new THREE.CylinderGeometry( "</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">cylinder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsW</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cylinder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">radius</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cylinder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">radius</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cylinder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">*</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cylinder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getWireCylinderConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cylinder</span>    :<span class="ActionScriptDefault_Text">WireCylinder</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">WireCylinder</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptComment">// height x 2 hack (due to Away3D Primitive error)
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh( new THREE.CylinderGeometry( "</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">cylinder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsW</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cylinder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">radius</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cylinder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">radius</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cylinder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">*</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">WireframeMaterial</span><span class="ActionScriptBracket/Brace">(</span>0x000000<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getLineSegmentConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>        
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lineSeg</span>    :<span class="ActionScriptDefault_Text">LineSegment</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">LineSegment</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;            
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">m</span>    :<span class="ActionScriptDefault_Text">Matrix3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getThreeJSMatrix</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">lineSeg</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vert0</span>:<span class="ActionScriptDefault_Text">Vertex</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lineSeg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">start</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vert1</span>:<span class="ActionScriptDefault_Text">Vertex</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lineSeg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">end</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vect3D0</span>:<span class="ActionScriptDefault_Text">Vector3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">m</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transformVector</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector3D</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">vert0</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">vert0</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">vert0</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vect3D1</span>:<span class="ActionScriptDefault_Text">Vector3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">m</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transformVector</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vector3D</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">vert1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">vert1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">vert1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">vert0</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vertex</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">vect3D0</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">vect3D0</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">vect3D0</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">vert1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vertex</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">vect3D1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">vect3D1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">vect3D1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>     :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">"var geo = new THREE.Geometry();"</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"geo.vertices.push(  new THREE.Vertex( new THREE.Vector3("</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">vert0</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">","</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">vert0</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">","</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">vert0</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">")));"</span><span class="ActionScriptOperator">,</span> 4<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"geo.vertices.push(  new THREE.Vertex( new THREE.Vector3("</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">vert1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">","</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">vert1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">","</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">vert1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">")));"</span><span class="ActionScriptOperator">,</span> 4<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">newLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Line( geo, new THREE.LineBasicMaterial( { color: 0x000000 } ) );"</span><span class="ActionScriptOperator">,</span> 4<span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getPlaneConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">plane</span>    :<span class="ActionScriptDefault_Text">Plane</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Plane</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh(new THREE.PlaneGeometry( "</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsW</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsH</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getWirePlaneConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">plane</span>    :<span class="ActionScriptDefault_Text">WirePlane</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">WirePlane</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh(new THREE.PlaneGeometry( "</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsW</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsH</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">WireframeMaterial</span><span class="ActionScriptBracket/Brace">(</span>0x000000<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getGridPlaneDataConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">plane</span>    :<span class="ActionScriptDefault_Text">GridPlane</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">GridPlane</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh(new THREE.PlaneGeometry( "</span><span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsW</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">plane</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsH</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">WireframeMaterial</span><span class="ActionScriptBracket/Brace">(</span>0x000000<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getSphereConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sphere</span>    :<span class="ActionScriptDefault_Text">Sphere</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Sphere</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh( new THREE.SphereGeometry( "</span> <span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">radius</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">sphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsW</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">sphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsH</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getWireSphereConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sphere</span>    :<span class="ActionScriptDefault_Text">WireSphere</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">WireSphere</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh( new THREE.SphereGeometry( "</span> <span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">radius</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">sphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsW</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">sphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsH</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">WireframeMaterial</span><span class="ActionScriptBracket/Brace">(</span>0x000000<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getGeodesicSphereConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sphere</span>    :<span class="ActionScriptDefault_Text">GeodesicSphere</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">GeodesicSphere</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh( new THREE.SphereGeometry( "</span> <span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">radius</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span>12
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span>12<span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getTorusConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">torus</span>    :<span class="ActionScriptDefault_Text">Torus</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Torus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh(new THREE.TorusGeometry( "</span> <span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">torus</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">radius</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">torus</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">tube</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">torus</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsT</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">torus</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsR</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">torus</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getWireTorusConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">torus</span>    :<span class="ActionScriptDefault_Text">WireTorus</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">WireTorus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Mesh(new THREE.TorusGeometry( "</span> <span class="ActionScriptOperator">+</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">torus</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">radius</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">torus</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">tube</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">torus</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsT</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">torus</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segmentsR</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" )"</span>
                <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">", "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">getMaterialConstructorString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">WireframeMaterial</span><span class="ActionScriptBracket/Brace">(</span>0x000000<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" );"</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getTridentConstructorAsString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">objname</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">trident</span>    :<span class="ActionScriptDefault_Text">Trident</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Trident</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">str</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"var "</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">objname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">" = new THREE.Trident({ xAxisColor: 0xFF0000, yAxisColor: 0x00FF00, zAxisColor: 0x0000FF, showArrows:true, length: 200 });"</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        
        <span class="ActionScriptComment">// Write all of the relevant properties and functions for the 
</span>        <span class="ActionScriptComment">// Mesh object into a data object.
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getMeshDataObj</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">mesh</span>:<span class="ActionScriptDefault_Text">Mesh</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">uniqueId</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Object</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>    <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">props</span>:[]<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">params</span>:[] <span class="ActionScriptBracket/Brace">}</span>;
            
            <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getObject3dDataObj</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">mesh</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">type</span>        :<span class="ActionScriptDefault_Text">Class</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getType</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">mesh</span> <span class="ActionScriptBracket/Brace">)</span>;    
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">typeName</span>    :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">typeName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getClassName</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">objname</span>        :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">typeName</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toLowerCase</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">uniqueId</span>;            

<span class="ActionScriptComment">// TO DO: Implement custom meshes
</span><span class="ActionScriptComment">// if not recognised type, get geometry too
</span><span class="ActionScriptComment">//            if (!isRecognisedObject3dType( type ) &amp;&amp; type != ObjectContainer3D) 
</span><span class="ActionScriptComment">//            {                
</span><span class="ActionScriptComment">//                var geoIndex:int = writeGeometry(mesh);
</span><span class="ActionScriptComment">//            }            
</span>            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">obj</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// Write all of the relevant properties and functions for the 
</span>        <span class="ActionScriptComment">// Object3d into a data object.
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getObject3dDataObj</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Object</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>    <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">props</span>:[]<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">params</span>:[] <span class="ActionScriptBracket/Brace">}</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">storedM</span>:<span class="ActionScriptDefault_Text">Matrix3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getThreeJSMatrix</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">object3d</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptComment">// Position
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">x</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">position</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">y</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">position</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">z</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">position</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">!=</span> 0 <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">!=</span> 0 <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">!=</span> 0 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">props</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">KVP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"position.x"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">props</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">KVP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"position.y"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">props</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">KVP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"position.z"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">z</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// Rotations
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">rotationX</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rotationX</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PI</span><span class="ActionScriptOperator">/</span>180;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">rotationY</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rotationY</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PI</span><span class="ActionScriptOperator">/</span>180;;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">rotationZ</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rotationZ</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PI</span><span class="ActionScriptOperator">/</span>180;;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rotationX</span> <span class="ActionScriptOperator">!=</span> 0 <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">props</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">KVP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"rotation.x"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">rotationX</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rotationY</span> <span class="ActionScriptOperator">!=</span> 0 <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">props</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">KVP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"rotation.y"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">rotationY</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rotationZ</span> <span class="ActionScriptOperator">!=</span> 0 <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">props</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">KVP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"rotation.z"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">rotationZ</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>            
            
            <span class="ActionScriptComment">// Scaling
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">scaleX</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">scaleX</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">scaleY</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">scaleY</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">scaleZ</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">scaleZ</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">scaleX</span> <span class="ActionScriptOperator">!=</span> 1 <span class="ActionScriptBracket/Brace">)</span>            
                <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">props</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">KVP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"scale.x"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">scaleX</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">scaleY</span> <span class="ActionScriptOperator">!=</span> 1 <span class="ActionScriptBracket/Brace">)</span>        
                <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">props</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">KVP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"scale.y"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">scaleY</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">scaleZ</span> <span class="ActionScriptOperator">!=</span> 1 <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">props</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">KVP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"scale.z"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">scaleZ</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;            

            <span class="ActionScriptComment">// reset object3d matrix3d to original
</span>            <span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">storedM</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">obj</span>;
        <span class="ActionScriptBracket/Brace">}</span>    
        
        <span class="ActionScriptComment">// UTILITY FUNCTIONS ==============================================
</span>        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getThreeJSMatrix</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">object3d</span>:<span class="ActionScriptDefault_Text">Object3D</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Matrix3D</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">m</span>:<span class="ActionScriptDefault_Text">Matrix3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">object3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptComment">//            m.prependRotation(-90, Vector3D.X_AXIS);
</span><span class="ActionScriptComment">//            m.appendScale(-1,1,1);
</span>            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">m</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">mathRound</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">decimalPlaces</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 2<span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">factor</span>    :<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">pow</span><span class="ActionScriptBracket/Brace">(</span>10<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">decimalPlaces</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">factor</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">/</span><span class="ActionScriptDefault_Text">factor</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// Is the Object3d type registered as being serialisable?
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">isRecognisedObject3dType</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptDefault_Text">Class</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span>    <span class="ActionScriptDefault_Text">getDefFunc</span>    :<span class="ActionScriptDefault_Text">Function</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_registeredObject3dTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">]</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">getDefFunc</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// Is the Object3dContainer type registered as being serialisable?
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">isRecognisedContainerType</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptDefault_Text">Class</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span>    <span class="ActionScriptDefault_Text">getDefFunc</span>    :<span class="ActionScriptDefault_Text">Function</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_registeredContainerTypes</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">]</span>;
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">getDefFunc</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// return the Class type for the object
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getType</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">object</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Class</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">classPath</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getClassPath</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">object</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">Class</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">getDefinitionByName</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">classPath</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// return the Class name for the object
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getClassName</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">object</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">classPath</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getQualifiedClassName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"::"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"."</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">classPath</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">indexOf</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"."</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptOperator">-</span>1 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">classPath</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">split</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">classPath</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"."</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// return the Class path for the object
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getClassPath</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">object</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getQualifiedClassName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"::"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"."</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// get a unique name for the container based on it's Class name and the given id
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getContainerName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptDefault_Text">Class</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">id</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">name</span>    :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getClassName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toLowerCase</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">id</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// LISTENER FUNCTIONS ===============================================
</span>        
        <span class="ActionScriptASDoc">/**
         * Default method for adding a complete event listener
         * The event.data holds the generated string from the wavefront class
         * 
         * @param    listener        The listener function
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addOnExportComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">listener</span>:<span class="ActionScriptDefault_Text">Function</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ExporterEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">COMPLETE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">listener</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">false</span><span class="ActionScriptOperator">,</span> 0<span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptASDoc">/**
         * Default method for removing a complete event listener
         * 
         * @param    listener        The listener function
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">removeOnExportComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">listener</span>:<span class="ActionScriptDefault_Text">Function</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ExporterEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">COMPLETE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">listener</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>            
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptComment">// Key Value Pair Class
</span><span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">KVP</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">key</span>        :<span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">value</span>    :<span class="ActionScriptDefault_Text">Object</span>;
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">KVP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">key</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">value</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">key</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">key</span>;
        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">value</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">value</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>




























</pre></body>
</html>
